# API Endpoints Summary

This file summarizes all available API endpoints in the Flask server, with a simple description and the main fields returned (based on the PocketBase schema).

---

## Achievements

- **GET /api/achievements/**
  - Description: Get all achievements.
  - Returns: List of achievements.
  - Fields: id, title, description, icon, requiredHours

- **GET /api/achievements/<achievement_id>**
  - Description: Get a specific achievement by ID.
  - Returns: Achievement object.
  - Fields: id, title, description, icon, requiredHours

- **POST /api/achievements/**
  - Description: Create a new achievement (admin only).
  - Body: title, description, icon, requiredHours
  - Returns: Created achievement object.

- **PUT /api/achievements/<achievement_id>**
  - Description: Update an achievement (admin only).
  - Body: Any updatable achievement fields.
  - Returns: Updated achievement object.

- **DELETE /api/achievements/<achievement_id>**
  - Description: Delete an achievement (admin only).
  - Returns: Success message.

- **GET /api/achievements/user/<user_id>**
  - Description: Get all achievements unlocked by a specific user.
  - Returns: List of user_achievement objects (with expanded achievement info).
  - Fields: id, user, achievement (expanded), unlockedAt

- **POST /api/achievements/unlock**
  - Description: Unlock an achievement for a user.
  - Body: user, achievement
  - Returns: user_achievement object.

---

## Users

- **GET /api/users/**
  - Description: Get all users (may be restricted).
  - Returns: List of users.
  - Fields: id, email, name, avatar, created, updated

- **GET /api/users/<user_id>**
  - Description: Get a specific user by ID.
  - Returns: User object.

- **POST /api/users/**
  - Description: Register a new user.
  - Body: email, password, name, avatar
  - Returns: Created user object.

- **POST /api/users/login**
  - Description: Log in a user.
  - Body: email, password
  - Returns: Auth token and user info.

- **POST /api/users/logout**
  - Description: Log out the current user.
  - Returns: Success message.

---

## Study Sessions

- **GET /api/sessions/**
  - Description: Get all study sessions for the authenticated user.
  - Returns: List of study_session objects.
  - Fields: id, user, room, durationMinutes, active, startedAt, endedAt, integrityScore

- **POST /api/sessions/**
  - Description: Create a new study session.
  - Body: user, room, durationMinutes, etc.
  - Returns: Created study_session object.

- **PUT /api/sessions/<session_id>**
  - Description: Update a study session.
  - Body: Any updatable session fields.
  - Returns: Updated study_session object.

- **DELETE /api/sessions/<session_id>**
  - Description: Delete a study session.
  - Returns: Success message.

---

## Study Rooms

- **GET /api/rooms/**
  - Description: Get all study rooms.
  - Returns: List of study_room objects.
  - Fields: id, roomName, host, maxParticipants, isPublic, thumbnail, webrtcSessionId

- **POST /api/rooms/**
  - Description: Create a new study room.
  - Body: roomName, host, maxParticipants, isPublic, thumbnail, webrtcSessionId
  - Returns: Created study_room object.

- **PUT /api/rooms/<room_id>**
  - Description: Update a study room.
  - Body: Any updatable room fields.
  - Returns: Updated study_room object.

- **DELETE /api/rooms/<room_id>**
  - Description: Delete a study room.
  - Returns: Success message.

---

## Discussions

- **GET /api/discussions/**
  - Description: Get all discussions.
  - Returns: List of discussion objects.
  - Fields: id, author, title, content, created

- **POST /api/discussions/**
  - Description: Create a new discussion.
  - Body: author, title, content
  - Returns: Created discussion object.

- **GET /api/discussions/<discussion_id>**
  - Description: Get a specific discussion by ID.
  - Returns: Discussion object.

- **PUT /api/discussions/<discussion_id>**
  - Description: Update a discussion.
  - Body: Any updatable discussion fields.
  - Returns: Updated discussion object.

- **DELETE /api/discussions/<discussion_id>**
  - Description: Delete a discussion.
  - Returns: Success message.

---

## Discussion Replies

- **GET /api/discussions/<discussion_id>/replies**
  - Description: Get all replies for a discussion.
  - Returns: List of discussion_reply objects.
  - Fields: id, author, discussion, body, created

- **POST /api/discussions/<discussion_id>/replies**
  - Description: Add a reply to a discussion.
  - Body: author, body
  - Returns: Created discussion_reply object.

---

## Study Targets

- **GET /api/targets/**
  - Description: Get all study targets for the authenticated user.
  - Returns: List of study_target objects.
  - Fields: id, user, dailyTarget, weeklyTarget, monthlyTarget, created, updated

- **POST /api/targets/**
  - Description: Create or update a study target.
  - Body: user, dailyTarget, weeklyTarget, monthlyTarget
  - Returns: Created/updated study_target object.

---

## Leaderboard

- **GET /api/leaderboard/**
  - Description: Get the leaderboard (study time totals per user).
  - Returns: List of leaderboard objects.
  - Fields: id, user, dayTotal, monthTotal, overallTotal

---

## Auth

- **POST /api/auth/login**
  - Description: Log in and receive an auth token.
  - Body: email, password
  - Returns: Auth token and user info.

- **POST /api/auth/logout**
  - Description: Log out the current user.
  - Returns: Success message.

---

## Notes
- All endpoints that require authentication expect a valid PocketBase token in the Authorization header.
- Some endpoints (like create/update/delete) may be restricted to the resource owner or admin users.
- Field names and returned objects are based on the PocketBase schema and may include expanded relations.
